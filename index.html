<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>iLearn: 登入本網站</title>
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>
<body class="min-w-[100vw] min-h-[100vh] bg-[url(images/ilearn_bg.webp)] bg-cover">
<div id="cookie_information" class="fixed top-0 left-0 bg-black/50 z-100 w-[100vw] h-[100vh] flex justify-center pt-12 hidden">
    <div class="grid place-items-center w-[500px] max-w-full h-fit bg-white border-4 border-[#99000F] rounded-xl">
        <div class="border-b-1 border-gray-300 w-full px-3 py-4 text-xl flex justify-between items-center">
            <div class="my-auto lang-zh_tw">您的瀏覽器必須啟動 Cookies 功能</div>
            <div class="my-auto lang-en hidden">Cookies must be enabled in your browser</div>
            <div id="cookie_information_close_x" class="my-auto cursor-pointer font-bold text-gray-500 pr-2 hover:text-black">x</div>
        </div>
        <div class="border-b-1 w-full p-4 border-gray-300 text-gray-800 font-light text-md">
            <p class="lang-zh_tw">
                本站使用了兩個cookie：必要的是連線cookie，通常叫做 MoodleSession。您必須在瀏覽器裡允許這個cookie，以便使您的登入在頁與頁之間連續有效。當您登離或關閉瀏覽器，這個cookie在瀏覽器和伺服器裡都會被刪除。另一個cookie純粹是為了方便，通常被叫做類似 MOODLEID 之類的名字。它只用來在瀏覽器裡記住您的用戶名。這意味著當您再次回到本站，登入頁面裡的用戶名已經替您填好了。拒絕此cookie是安全的，只不過每次登入都要重新輸入用戶名而已。
            </p>
            <p class="lang-en hidden">
                Two cookies are used on this site:<br>
                <br>
                The essential one is the session cookie, usually called MoodleSession. You must allow this cookie in your browser to provide continuity and to remain logged in when browsing the site. When you log out or close the browser, this cookie is destroyed (in your browser and on the server).<br>
                <br>
                The other cookie is purely for convenience, usually called MOODLEID or similar. It just remembers your username in the browser. This means that when you return to this site, the username field on the login page is already filled in for you. It is safe to refuse this cookie - you will just have to retype your username each time you log in.
            </p>
        </div>
        <div class="w-full p-4 flex justify-end">
            <button id="cookie_information_close_button" class="bg-[#99000F] px-4 py-2 rounded-xl text-white text-sm cursor-pointer lang-zh_tw">好</button>
            <button class="bg-[#99000F] px-4 py-2 rounded-xl text-white text-sm cursor-pointer lang-en hidden">OK</button>
        </div>
    </div>
</div>
<div class="h-[100vh] flex justify-center sm:items-center items-start">
    <div class="bg-white p-4 mb-8 rounded-lg grid lg:grid-cols-2 md:w-[58vw] m-4">
        <div class="lg:border-r-1 border-gray-300 px-8 my-4 pb-4">
            <div><img src="images/ilearn_logo.webp" alt="iLearn logo" class="w-full"></div>
            <form class="mt-4">
                <input type="text" name="username" placeholder="帳號" class="w-full font-light text-xl p-2 pl-4 border-1 border-gray-500 rounded-lg mb-4 lang-zh_tw">
                <input type="text" name="username" placeholder="Username" class="w-full font-light text-xl p-2 pl-4 border-1 border-gray-500 rounded-lg mb-4 lang-en hidden">
                <input type="password" name="password" placeholder="密碼" class="w-full font-light text-xl p-2 pl-4 border-1 border-gray-500 rounded-lg mb-4 lang-zh_tw">
                <input type="password" name="password" placeholder="Password" class="w-full font-light text-xl p-2 pl-4 border-1 border-gray-500 rounded-lg mb-4 lang-en hidden">
                <button type="submit" class="w-full bg-[#99000F] text-white p-2 text-xl font-extralight rounded-lg cursor-pointer lang-zh_tw">登入</button>
                <button type="submit" class="w-full bg-[#99000F] text-white p-2 text-xl font-extralight rounded-lg cursor-pointer lang-en hidden">Login</button>
            </form>
        </div>
        <div class="grid place-items-center p-4">
            <div>
                <div class="lang-zh_tw text-center">
                    <div class="font-medium text-lg">請使用NID帳號/密碼登入平台。</div>
                    <div class="pt-2 font-medium text-lg">
                        欲變更NID密碼，請連結至
                        <a href="https://netid.fcu.edu.tw/">
                            <img src="images/ilearn_nid_logo.webp" alt="NID logo" class="inline-block w-[83px]">
                        </a>
                    </div>
                </div>
                <div class="lang-en hidden text-center">
                    <div class="font-medium text-lg">Please log in with your NID account/password.</div>
                    <div class="pt-2 font-medium text-lg">
                        To change your NID password, please go to
                        <a href="https://netid.fcu.edu.tw/">
                            <img src="images/ilearn_nid_logo.webp" alt="NID logo" class="inline-block w-[83px]">
                        </a>
                    </div>
                </div>
                <div class="pt-12 text-sm flex justify-center gap-4">
                    <select id="langSelect" name="langSelect" class="cursor-pointer border border-[#99000F] text-[#99000F] bg-white rounded px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-[#99000F]">
                        <option value="zh_tw">正體中文 (zh_tw)</option>
                        <option value="en">English (en)</option>
                    </select>
                    <div id="cookie_information_button" class="text-[#99000F] my-auto cursor-pointer hover:underline">
                        <span class="bg-[#99000F] text-white px-1 rounded-full">?</span>
                        <span class="lang-zh_tw">&nbsp;Cookie使用資訊</span>
                        <span class="lang-en hidden">&nbsp;Cookies notice</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const cookieInfo = document.getElementById('cookie_information');
        const cookieInfoCloseButton = document.getElementById('cookie_information_close_button');
        const cookieInfoCloseX = document.getElementById('cookie_information_close_x');
        const cookieInfoButton = document.getElementById('cookie_information_button');
        const langSelect = document.getElementById('langSelect');

        function setCookie(name, value, days) {
            document.cookie = `${name}=${value}; path=/; max-age=${days * 86400}`;
        }

        function getCookie(name) {
            const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
            return match ? match[2] : null;
        }

        function toggleLanguageBlocks(lang) {
            document.querySelectorAll('.lang-zh_tw').forEach(el => el.classList.toggle('hidden', lang !== 'zh_tw'));
            document.querySelectorAll('.lang-en').forEach(el => el.classList.toggle('hidden', lang !== 'en'));

            if (lang === 'zh_tw') {
                document.title = 'iLearn: 登入本網站'
            } else if (lang === 'en') {
                document.title = 'iLearn: Log in to the site'
            }
        }

        const currentLang = getCookie('lang') || 'zh_tw';
        langSelect.value = currentLang;
        toggleLanguageBlocks(currentLang);

        langSelect.addEventListener('change', function () {
            setCookie('lang', this.value, 365);
            toggleLanguageBlocks(this.value);
        });

        function closeCookieInfo() {
            cookieInfo.classList.add('hidden');
            setCookie('cookies_accepted', 'true', 365);
        }

        cookieInfoCloseButton.addEventListener('click', closeCookieInfo);
        cookieInfoCloseX.addEventListener('click', closeCookieInfo);
        cookieInfoButton.addEventListener('click', () => cookieInfo.classList.remove('hidden'));
        cookieInfo.addEventListener('click', event => {
            if (event.target === cookieInfo) closeCookieInfo();
        });
    });
</script>
</body>
</html>
